<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ryan Andrew Pretzer - Mobile Product Strategist. Enterprise mobile strategy, design systems, and process improvement expertise from Fortune 500 experience.">
    <title>Ryan Andrew Pretzer - Mobile Product Strategist</title>
    
    <!-- Critical CSS - Embed to ensure it loads -->
    <style>
        /* Reset */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* Base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
        }
        
        /* Hide content until loaded */
        .initial-loader {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s;
        }
        
        .initial-loader.hide {
            opacity: 0;
            pointer-events: none;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #f0f0f0;
            border-top-color: #333;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
            height: 70px;
        }
        
        .header-content {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        /* Sections */
        section {
            padding: 80px 0;
        }
        
        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 3rem;
            font-weight: 300;
        }
        
        main {
            margin-top: 70px;
        }
        
        /* Basic grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        /* Hide elements by default */
        .skeleton { display: none; }
        body.loading .skeleton { display: block; }
        body.loaded .skeleton { display: none; }
    </style>
    
    <!-- Load all CSS files -->
    <link rel="stylesheet" href="styles/base/variables.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components/cards.css">
    <link rel="stylesheet" href="styles/components/navigation.css">
    <link rel="stylesheet" href="styles/components/footer.css">
    <link rel="stylesheet" href="styles/components/loading.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Ryan Andrew Pretzer - Mobile Product Strategist">
    <meta property="og:description" content="Enterprise mobile strategy, design systems, and process improvement expertise from Fortune 500 experience.">
    <meta property="og:type" content="website">
</head>
<body class="loading">
    <!-- Loading State -->
    <div class="initial-loader">
        <div class="spinner"></div>
    </div>

    <!-- Skip to content -->
    <a href="#main" class="skip-nav">Skip to main content</a>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">
                    <svg class="logo-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="1.5"/>
                        <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    <span>Ryan Andrew Pretzer</span>
                </a>
                <nav>
                    <ul class="nav-links">
                        <li><a href="#about">About</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#portfolio">Portfolio</a></li>
                        <li><a href="#content">Insights</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <ul class="mobile-nav-list">
            <li class="mobile-nav-item"><a href="#about" class="mobile-nav-link">About</a></li>
            <li class="mobile-nav-item"><a href="#services" class="mobile-nav-link">Services</a></li>
            <li class="mobile-nav-item"><a href="#portfolio" class="mobile-nav-link">Portfolio</a></li>
            <li class="mobile-nav-item"><a href="#content" class="mobile-nav-link">Insights</a></li>
            <li class="mobile-nav-item"><a href="#contact" class="mobile-nav-link">Contact</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main id="main">
        <!-- Hero Section -->
        <section class="hero" id="hero">
            <div class="container">
                <div class="hero-content" id="hero-content">
                    <h1>Loading...</h1>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="about" id="about">
            <div class="container">
                <h2 class="section-title">About</h2>
                <div class="about-content">
                    <div class="about-text" id="about-text">
                        <p>Loading about content...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section class="services" id="services">
            <div class="container">
                <h2 class="section-title">Services</h2>
                <div class="services-grid grid" id="services-grid">
                    <div class="skeleton skeleton-card">Loading services...</div>
                </div>
            </div>
        </section>

        <!-- Portfolio Section -->
        <section class="portfolio" id="portfolio">
            <div class="container">
                <h2 class="section-title">Selected Work</h2>
                <div class="portfolio-grid grid" id="portfolio-grid">
                    <div class="skeleton skeleton-card">Loading portfolio...</div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section class="pricing" id="pricing">
            <div class="container">
                <h2 class="section-title">Engagement Models</h2>
                <div class="pricing-intro" id="pricing-intro">
                    <p>Loading pricing information...</p>
                </div>
                <div class="pricing-grid grid" id="pricing-grid">
                    <div class="skeleton skeleton-card">Loading pricing...</div>
                </div>
            </div>
        </section>

        <!-- Content Section -->
        <section class="content" id="content">
            <div class="container">
                <h2 class="section-title">Insights & Resources</h2>
                <div class="content-grid grid" id="content-grid">
                    <div class="skeleton skeleton-card">Loading content...</div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="contact" id="contact">
            <div class="container">
                <h2 class="section-title">Let's Connect</h2>
                <p>I'd love to hear about your project.</p>
                <div class="contact-info" id="contact-info">
                    <p>Loading contact information...</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="social-links" id="social-links"></div>
            <p>&copy; 2025 Ryan Andrew Pretzer. All rights reserved.</p>
        </div>
    </footer>

    <!-- Load marked.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/marked@4.2.0/lib/marked.umd.js"></script>
    
    <!-- Simplified inline script for immediate functionality -->
    <script>
        // Quick fix for loader
        window.addEventListener('load', function() {
            document.querySelector('.initial-loader').classList.add('hide');
            document.body.classList.remove('loading');
            document.body.classList.add('loaded');
        });

        // Mobile menu toggle
        const mobileToggle = document.querySelector('.mobile-menu-toggle');
        const mobileNav = document.querySelector('.mobile-nav');
        
        if (mobileToggle) {
            mobileToggle.addEventListener('click', function() {
                this.classList.toggle('active');
                mobileNav.classList.toggle('active');
            });
        }

        // Close mobile menu on link click
        document.querySelectorAll('.mobile-nav-link').forEach(link => {
            link.addEventListener('click', () => {
                mobileToggle.classList.remove('active');
                mobileNav.classList.remove('active');
            });
        });

        // Load content
        async function loadContent() {
            try {
                // Base path - adjust if your repo name is different
                const basePath = window.location.hostname === 'localhost' ? '' : '';
                
                // Load hero content
                const heroData = await fetch(`${basePath}/content/data/hero.json`).then(r => r.json());
                document.getElementById('hero-content').innerHTML = `
                    <h1>${heroData.title}</h1>
                    <p>${heroData.subtitle}</p>
                    <a href="${heroData.cta.link}" class="cta-button">${heroData.cta.text}</a>
                `;

                // Load about content
                const aboutMd = await fetch(`${basePath}/content/markdown/about.md`).then(r => r.text());
                document.getElementById('about-text').innerHTML = marked.parse(aboutMd);

                // Load services
                const servicesData = await fetch(`${basePath}/content/data/services.json`).then(r => r.json());
                document.getElementById('services-grid').innerHTML = servicesData.services.map(service => `
                    <div class="service-card card">
                        <div class="service-icon">${service.icon}</div>
                        <h3>${service.title}</h3>
                        <p>${service.description}</p>
                    </div>
                `).join('');

                // Load portfolio
                const portfolioData = await fetch(`${basePath}/content/data/portfolio.json`).then(r => r.json());
                document.getElementById('portfolio-grid').innerHTML = portfolioData.projects.map(project => `
                    <div class="portfolio-card card">
                        <h3>${project.title}</h3>
                        <p>${project.description}</p>
                        <div class="tags">
                            ${project.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `).join('');

                // Load pricing
                const pricingData = await fetch(`${basePath}/content/data/pricing.json`).then(r => r.json());
                document.getElementById('pricing-intro').innerHTML = `<p>${pricingData.intro}</p>`;
                document.getElementById('pricing-grid').innerHTML = pricingData.models.map(model => `
                    <div class="pricing-card card ${model.featured ? 'featured' : ''}">
                        <h3>${model.title}</h3>
                        <p>${model.subtitle}</p>
                        ${model.options ? model.options.map(opt => `
                            <div class="pricing-option">
                                <strong>${opt.availability}</strong> - ${opt.price}
                                <p>${opt.description}</p>
                            </div>
                        `).join('') : ''}
                    </div>
                `).join('');

                // Load content
                const contentData = await fetch(`${basePath}/content/data/content.json`).then(r => r.json());
                document.getElementById('content-grid').innerHTML = contentData.items.map(item => `
                    <div class="content-card card">
                        <span class="content-type">${item.type}</span>
                        <h3>${item.title}</h3>
                        <p>${item.excerpt}</p>
                    </div>
                `).join('');

                // Load contact
                const contactData = await fetch(`${basePath}/content/data/contact.json`).then(r => r.json());
                document.getElementById('contact-info').innerHTML = contactData.methods.map(method => `
                    <div class="contact-method">
                        ${method.icon}
                        <a href="${method.link}">${method.label}</a>
                    </div>
                `).join('');

                document.getElementById('social-links').innerHTML = contactData.social.map(social => `
                    <a href="${social.url}" class="social-link" aria-label="${social.platform}">
                        ${social.icon}
                    </a>
                `).join('');

            } catch (error) {
                console.error('Error loading content:', error);
            }
        }

        // Load content when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadContent);
        } else {
            loadContent();
        }
    </script>
</body>
</html>